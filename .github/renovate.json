{
    "$schema": "https://docs.renovatebot.com/renovate-schema.json",
    "extends": [
        "mergeConfidence:all-badges",
        "config:recommended"
    ],
    "ignorePresets": [
        "workarounds:javaLTSVersions"
    ],
    "customDatasources": {
        "custom_java": {
            "defaultRegistryUrlTemplate": "https://api.adoptium.net/v3/info/available_releases",
            "format": "json",
            "transformTemplates": [
                "{ \"releases\": $map(available_lts_releases, function($v) { { \"version\": $string($v) } }) }"
            ]
        }
    },
    "enabledManagers": [
        "maven-wrapper",
        "docker-compose",
        "kubernetes",
        "helm-values",
        "helmv3",
        "custom.regex"
    ],
    "maven-wrapper": {
        "managerFilePatterns": [
            "/(^|/)mvnw$/",
            "/(^|/)mvnw.cmd$/",
            "/(^|/).mvn/wrapper/maven-wrapper.properties$/"
        ],
        "versioning": "maven"
    },
    "docker-compose": {
        "enabled": true
    },
    "kubernetes": {
        "managerFilePatterns": [
            "/k8s/.+\\.ya?ml$/",
            "/helm-charts/templates/.+\\.ya?ml$/"
        ]
    },
    "helm-values": {
        "managerFilePatterns": [
            "/helm-charts/.+/values\\.ya?ml$/"
        ]
    },
    "helmv3": {
        "managerFilePatterns": [
            "/(^|/)Chart\\.ya?ml$/"
        ]
    },
    "packageRules": [
        {
            "matchCategories": [
                "docker"
            ],
            "registryUrls": [
                "https://index.docker.io"
            ]
        },
        {
            "matchDatasources": [
                "docker"
            ],
            "matchPackageNames": [
                "/^domboeckli//"
            ],
            "versioning": "maven",
            "allowedVersions": "/^[0-9]+\\.[0-9]+\\.[0-9]+(-SNAPSHOT)?$/",
            "ignoreUnstable": false,
            "automerge": false,
            "automergeType": "pr",
            "ignoreTests": true
        },
        {
            "matchDatasources": [
                "docker"
            ],
            "matchPackageNames": [
                "!/^domboeckli//"
            ],
            "automerge": false,
            "automergeType": "pr",
            "ignoreTests": true
        }
    ],
    "customManagers": [
        {
            "description": "Parse and change the java version from pom.xml",
            "customType": "regex",
            "datasourceTemplate": "custom.custom_java",
            "depNameTemplate": "java",
            "managerFilePatterns": [
                "/(^|\\/)pom\\.xml$/"
            ],
            "matchStrings": [
                "<java\\.version>(?<currentValue>\\d+)</java\\.version>"
            ],
            "autoReplaceStringTemplate": "<java.version>{{{newValue}}}</java.version>"
        },
        {
            "description": "Parse and change JAVA_VERSION in GitHub workflows",
            "customType": "regex",
            "datasourceTemplate": "custom.custom_java",
            "depNameTemplate": "java",
            "managerFilePatterns": [
                "/^\\.github\\/workflows\\/(release|maven-build)\\.ya?ml$/"
            ],
            "matchStrings": [
                "  JAVA_VERSION:[\\t ]*(?<currentValue>\\d+)"
            ],
            "autoReplaceStringTemplate": "  JAVA_VERSION: {{{newValue}}}"
        }
    ],
    "platformAutomerge": false,
    "dependencyDashboard": true,
    "prHourlyLimit": 0,
    "prConcurrentLimit": 0,
    "baseBranchPatterns": [
        "master"
    ],
    "branchPrefix": "feature/renovate-",
    "separateMinorPatch": true,
    "separateMajorMinor": true,
    "automerge": false,
    "rebaseWhen": "conflicted"
}
